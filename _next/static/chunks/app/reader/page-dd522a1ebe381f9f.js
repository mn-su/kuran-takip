(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[804],{1178:(e,a,t)=>{Promise.resolve().then(t.bind(t,4907))},3422:(e,a,t)=>{"use strict";t.d(a,{I:()=>c,Z:()=>i});var r=t(5155),n=t(2115);let s="kuran_takip_settings",l=(0,n.createContext)(void 0);function i(e){let{children:a}=e,[t,i]=(0,n.useState)("medium"),[c,o]=(0,n.useState)("abay"),[d,u]=(0,n.useState)("tanzil_simple_plain"),[m,h]=(0,n.useState)(!0);(0,n.useEffect)(()=>{let e=window.localStorage.getItem(s);if(!e)return void window.localStorage.setItem(s,JSON.stringify({fontSize:"medium",quranFont:"abay",textSource:"tanzil_simple_plain",showTranslation:!0}));try{let a=JSON.parse(e);("small"===a.fontSize||"medium"===a.fontSize||"large"===a.fontSize)&&i(a.fontSize),("amiri"===a.quranFont||"abay"===a.quranFont||"diyanet_amasya"===a.quranFont)&&o(a.quranFont),("tanzil_simple_plain"===a.textSource||"diyanet"===a.textSource)&&u(a.textSource),"boolean"==typeof a.showTranslation&&h(a.showTranslation)}catch(e){}},[]);let f=(0,n.useCallback)((e,a,t,r)=>{window.localStorage.setItem(s,JSON.stringify({fontSize:e,quranFont:a,textSource:t,showTranslation:r}))},[]),x=(0,n.useCallback)(e=>{i(e),f(e,c,d,m)},[f,c,m,d]),p=(0,n.useCallback)(e=>{o(e),f(t,e,d,m)},[t,f,m,d]),g=(0,n.useCallback)(e=>{u(e),f(t,c,e,m)},[t,f,c,m]),b=(0,n.useCallback)(e=>{h(e),f(t,c,d,e)},[t,f,c,d]),y=(0,n.useMemo)(()=>({fontSize:t,quranFont:c,textSource:d,showTranslation:m,setFontSize:x,setQuranFont:p,setTextSource:g,setShowTranslation:b}),[t,c,x,p,b,g,m,d]);return(0,r.jsx)(l.Provider,{value:y,children:a})}function c(){let e=(0,n.useContext)(l);if(!e)throw Error("useAppSettings must be used within SettingsProvider");return e}},4907:(e,a,t)=>{"use strict";t.d(a,{default:()=>E});var r=t(5155),n=t(2115),s=t(3422),l=t(7003),i=t(5016);let c={small:"text-[2.1rem] md:text-[2.6rem] leading-[2.6]",medium:"text-[2.45rem] md:text-[3.05rem] leading-[2.8]",large:"text-[2.85rem] md:text-[3.5rem] leading-[3.0]"},o={small:"text-sm",medium:"text-base",large:"text-lg"},d={small:"h-10 min-w-10 text-xl",medium:"h-11 min-w-11 text-[1.4rem]",large:"h-12 min-w-12 text-[1.6rem]"};function u(e){let{ayahs:a,pageMeta:t,onPreviousPage:u,onNextPage:m,canGoPrevious:h,canGoNext:f,isNavigating:x,canShowTranslations:p,isMealOpen:g,onToggleMeal:b,zoomLevel:y=1}=e,{fontSize:j,quranFont:k}=(0,s.I)(),w=(0,n.useMemo)(()=>c[j],[j]),v=(0,n.useMemo)(()=>o[j],[j]),N=(0,n.useMemo)(()=>d[j],[j]),S="abay"===k?"font-abay":"diyanet_amasya"===k?"font-diyanet-amasya":"font-amiri",_=(0,n.useMemo)(()=>new Intl.NumberFormat("ar-u-nu-arab"),[]);return(0,r.jsxs)("div",{className:"space-y-5",children:[(0,r.jsx)("section",{className:"w-full rounded-2xl border border-[#dcccae] bg-[#f5ecd8] p-3 shadow-sm dark:border-border dark:bg-card",children:(0,r.jsxs)("div",{className:"space-y-6 rounded-xl border border-[#ddccad] bg-[#fbf3df] p-4 dark:border-border dark:bg-card/60",children:[(0,r.jsxs)("div",{className:"grid grid-cols-[auto,auto,1fr,auto,auto] items-center gap-1 sm:gap-2 border-y border-[#d7c5a2] py-2 text-sm text-[#57432d] dark:border-border dark:text-muted-foreground",children:[(0,r.jsxs)(l.$,{variant:"outline",size:"sm",disabled:!f||x,onClick:m,children:[(0,r.jsx)("span",{className:"sm:hidden",children:"◀"}),(0,r.jsx)("span",{className:"hidden sm:inline",children:"Sonraki Sayfa"})]}),(0,r.jsxs)("p",{className:"font-medium text-[#332314] dark:text-foreground",children:[(0,r.jsx)("span",{className:"sm:hidden",children:"S."}),(0,r.jsx)("span",{className:"hidden sm:inline",children:"Sayfa"})," ",t.page]}),(0,r.jsx)("p",{className:"truncate text-center",children:t.rangeLabel}),(0,r.jsxs)("p",{className:"text-right font-medium text-[#332314] dark:text-foreground",children:[(0,r.jsx)("span",{className:"sm:hidden",children:"C."}),(0,r.jsx)("span",{className:"hidden sm:inline",children:"C\xfcz"})," ",t.juzLabel.replace(/^Cüz\s*/,"")]}),(0,r.jsxs)(l.$,{variant:"outline",size:"sm",disabled:!h||x,onClick:u,children:[(0,r.jsx)("span",{className:"sm:hidden",children:"▶"}),(0,r.jsx)("span",{className:"hidden sm:inline",children:"\xd6nceki Sayfa"})]})]}),(0,r.jsx)("div",{className:(0,i.cn)(S,w,"arabic-mushaf-flow break-keep hyphens-none text-[#22160f] dark:text-foreground"),dir:"rtl",style:{zoom:y},children:a.map(e=>(0,r.jsxs)("span",{id:"ayah-".concat(e.surahId,"-").concat(e.ayahId),children:[e.isSurahStart&&(0,r.jsxs)("span",{className:"my-4 block rounded-xl border border-[#d5bd94] bg-[#efe1c4] px-4 py-3 text-center shadow-[inset_0_1px_0_rgba(255,255,255,0.75)] dark:border-border dark:bg-card/35",children:[(0,r.jsxs)("span",{className:"mb-2 flex items-center gap-3 text-[#8d7250] dark:text-muted-foreground",children:[(0,r.jsx)("span",{className:"h-px flex-1 bg-gradient-to-l from-transparent via-[#cbb48e] to-transparent dark:via-border"}),(0,r.jsxs)("span",{dir:"auto",className:"shrink-0 text-sm font-normal tracking-[0.09em] text-[#7b6143] dark:text-muted-foreground",children:[e.surahNameAr," • ",e.surahNameTr]}),(0,r.jsx)("span",{className:"h-px flex-1 bg-gradient-to-r from-transparent via-[#cbb48e] to-transparent dark:via-border"})]}),1!==e.surahId&&9!==e.surahId&&(0,r.jsx)("span",{className:(0,i.cn)(S,"block text-center [text-align-last:center] text-[1.78rem] font-normal leading-[1.85] text-[#403023] dark:text-foreground"),children:"بِسْمِ اللَّهِ الرَّحْمَٰنِ الرَّحِيمِ"})]}),(0,r.jsx)("span",{className:"mx-1",children:e.text}),(0,r.jsx)("span",{className:(0,i.cn)("mx-1 inline-flex items-center justify-center rounded-full border-2 border-[#c9b48a] ring-1 ring-[#f5ecd8] bg-[#efe1c4]/60 px-2 font-semibold text-[#5a4528] align-middle dark:border-amber-600/50 dark:ring-amber-900/30 dark:bg-amber-950/30 dark:text-amber-200/80",N),children:_.format(e.ayahId)})," "]},"ar-".concat(e.surahId,"-").concat(e.ayahId)))}),(0,r.jsxs)("div",{className:"grid grid-cols-[auto,auto,1fr,auto,auto] items-center gap-1 sm:gap-2 border-y border-[#d7c5a2] py-2 text-sm text-[#57432d] dark:border-border dark:text-muted-foreground",children:[(0,r.jsxs)(l.$,{variant:"outline",size:"sm",disabled:!f||x,onClick:m,children:[(0,r.jsx)("span",{className:"sm:hidden",children:"◀"}),(0,r.jsx)("span",{className:"hidden sm:inline",children:"Sonraki Sayfa"})]}),(0,r.jsxs)("p",{className:"font-medium text-[#332314] dark:text-foreground",children:[(0,r.jsx)("span",{className:"sm:hidden",children:"S."}),(0,r.jsx)("span",{className:"hidden sm:inline",children:"Sayfa"})," ",t.page]}),(0,r.jsx)("p",{className:"truncate text-center",children:t.rangeLabel}),(0,r.jsxs)("p",{className:"text-right font-medium text-[#332314] dark:text-foreground",children:[(0,r.jsx)("span",{className:"sm:hidden",children:"C."}),(0,r.jsx)("span",{className:"hidden sm:inline",children:"C\xfcz"})," ",t.juzLabel.replace(/^Cüz\s*/,"")]}),(0,r.jsxs)(l.$,{variant:"outline",size:"sm",disabled:!h||x,onClick:u,children:[(0,r.jsx)("span",{className:"sm:hidden",children:"▶"}),(0,r.jsx)("span",{className:"hidden sm:inline",children:"\xd6nceki Sayfa"})]})]})]})}),p&&(0,r.jsxs)("section",{className:"w-full rounded-xl border bg-card p-4 shadow-sm",children:[(0,r.jsxs)("div",{className:"mb-3 flex items-center justify-between gap-2",children:[(0,r.jsx)("h3",{className:"text-base font-semibold",children:"Bu sayfanin meali"}),(0,r.jsx)(l.$,{variant:"secondary",size:"sm",onClick:b,children:g?"Meali Gizle":"Meali G\xf6ster"})]}),g&&(0,r.jsx)("div",{className:"space-y-3",children:a.map(e=>(0,r.jsxs)("p",{className:(0,i.cn)("text-muted-foreground",v),children:[(0,r.jsxs)("span",{className:"font-medium text-foreground",children:[e.surahId,":",e.ayahId]})," ",e.translation]},"tr-".concat(e.surahId,"-").concat(e.ayahId)))})]})]})}var m=t(3209),h=t(3746),f=t(1709),x=t(4568);let p="610|oU1qhB6FbEXvCW4fxpdEDzlCGuFiyFcOqMjTuFoofe6435d1";async function g(e){if(!p)throw Error("Diyanet API anahtarı ayarlanmamış.");let a=await fetch("".concat("https://t061.diyanet.gov.tr/apigateway/acikkaynakkuran/api/v1","/verses/page/").concat(e),{headers:{Authorization:"Bearer ".concat(p),Accept:"application/json"},signal:AbortSignal.timeout(5e3)});if(!a.ok)throw Error("Diyanet API hatası: ".concat(a.status));let t=await a.json();if(!t.success||!t.data)throw Error(t.message||"Diyanet verisi alınamadı.");return t.data}var b=t(9852),y=t(1662);let j={tanzil_simple_plain:"".concat("/kuran-takip","/texts/tanzil/quran-simple-plain.txt")},k=new Map,w=["بِسْمِ اللَّهِ الرَّحْمَٰنِ الرَّحِيمِ","بِسْمِ اللَّهِ الرَّحْمَنِ الرَّحِيمِ","بسم الله الرحمن الرحيم"];async function v(e){let a=await fetch(j[e],{cache:"force-cache"});if(!a.ok)throw Error("Tanzil metni alınamadı (HTTP ".concat(a.status,")."));var t=await a.text();let r=new Map,n=0;if(t.split(/\r?\n/).forEach(e=>{let a=e.trim();if(!a||a.startsWith("#"))return;let[t,s,...l]=a.split("|");if(!t||!s||0===l.length)return;let i=Number(t),c=Number(s);if(!Number.isFinite(i)||!Number.isFinite(c))return;let{text:o,stripped:d}=function(e,a,t){if(1!==a||1===e||9===e)return{text:t,stripped:!1};for(let e of w){if(!t.startsWith(e))continue;let a=t.slice(e.length).trim();if(!a)break;return{text:a,stripped:!0}}return{text:t,stripped:!1}}(i,c,l.join("|").trim());o&&(d&&(n+=1),r.set("".concat(i,":").concat(c),o))}),r.size<6200)throw Error("Tanzil metni beklenenden eksik g\xf6r\xfcn\xfcyor.");if(112!==n)throw Error("Tanzil metninde sure başlangıcı besmele temizliği ".concat(112," beklenirken ").concat(n," oldu."));return r}async function N(e){if(!k.has(e)){let a=v(e);k.set(e,a),a.catch(()=>{k.delete(e)})}return k.get(e)}function S(e){return e instanceof Error?e.message:"Beklenmeyen bir hata oluştu."}function _(e){let{pageNumber:a,goToPage:t}=e,{showTranslation:i,textSource:c}=(0,s.I)(),[o,d]=(0,n.useState)(null),[p,j]=(0,n.useState)([]),[k,w]=(0,n.useState)(""),[v,_]=(0,n.useState)(""),[z,E]=(0,n.useState)(!0),[I,A]=(0,n.useState)(!1),[C,T]=(0,n.useState)(!1),[M,P]=(0,n.useState)(null),F=(0,n.useRef)(null),L=(0,n.useRef)(null);(0,n.useEffect)(()=>{},[a]),(0,n.useEffect)(()=>{window.localStorage.setItem(b.LB,(0,b.vc)({page:a}))},[a]);let R=(0,n.useMemo)(()=>(0,f.Xk)(a),[a]),B=(0,n.useMemo)(()=>{let[e,t]=(0,f.C_)(a);return e===t?"C\xfcz ".concat(e):"C\xfcz ".concat(e,"-").concat(t)},[a]),q=(0,n.useMemo)(()=>o?(0,x.Iq)(o):0,[o]),D=(0,n.useMemo)(()=>v?k?"".concat(k," • ").concat(v):v:"Sayfa i\xe7eriği",[v,k]),X=(0,n.useCallback)(e=>Array.from(new Set([...e,...(0,f.aI)(a).filter(e=>e.toAyah===(0,f.Ko)(e.surah)).map(e=>e.surah)])).sort((e,a)=>e-a),[a]),Y=(0,n.useCallback)(async(e,r)=>{let n=(0,f.ZS)(e);if(n!==a){if(!o)return void t(n);A(!0),P(null);try{let e=(0,f.nU)(n),a=(null==r?void 0:r.markCurrentPageAsRead)?X(o.completedSurahs):o.completedSurahs,s=await (0,x.FB)({currentSurah:e.first[0],currentAyah:e.first[1],completedSurahs:a,completedAt:o.completedAt});d(s),t(n)}catch(e){P(S(e))}finally{A(!1)}}},[X,a,o,t]);(0,n.useEffect)(()=>{let e=!1;return async function(){E(!0),P(null);try{let t=(0,f.aI)(a),r=Array.from(new Set(t.map(e=>e.surah))),[n,s]=await Promise.all([(0,x.y4)(),(0,y.oM)()]);if(e)return;let l=new Map(s.map(e=>[e.id,e])),i=e=>{var a;return(null==(a=l.get(e))?void 0:a.nameAr)||""},o=e=>{let a=l.get(e);return(null==a?void 0:a.nameTr)||(null==a?void 0:a.transliteration)||"Sure ".concat(e)},u=async a=>{let n=await Promise.all(r.map(e=>(0,y.hR)(e)));if(e)return[];let s=new Map(n.map(e=>[e.id,e])),l=[];for(let e of t){let t=s.get(e.surah);t&&t.verses.filter(a=>a.id>=e.fromAyah&&a.id<=e.toAyah).forEach(e=>{var r;l.push({surahId:t.id,surahNameAr:t.nameAr||i(t.id),surahNameTr:t.nameTr||t.transliteration||o(t.id),ayahId:e.id,text:null!=(r=null==a?void 0:a.get("".concat(t.id,":").concat(e.id)))?r:e.text,translation:e.translation,isSurahStart:1===e.id})})}return l},m=null,h=[];if("diyanet"===c)try{let t=await g(a);if(e)return;h=t.map(e=>({surahId:e.surah_number,surahNameAr:e.surah_name_arabic||i(e.surah_number),surahNameTr:e.surah_name_turkish||o(e.surah_number),ayahId:e.verse_number,text:e.arabic_text||"",translation:e.text,isSurahStart:1===e.verse_number}))}catch(e){console.warn("Diyanet API hatası, yerel kaynağa d\xfcş\xfcl\xfcyor:",e),m="Diyanet sunucularına ulaşılamadı. Yerel \xe7evrimdışı metin g\xf6steriliyor."}if(0===h.length){let a;try{if(a=await N("tanzil_simple_plain"),e)return}catch(e){m||(m="Yerel Arap\xe7a metin y\xfcklenemedi. Bu sayfada temel json metni g\xf6steriliyor."),a=void 0}if(h=await u(a),e)return}let p=t[0],b=t[t.length-1];if(p&&b){let e=i(p.surah),a=o(p.surah),t=o(b.surah);w(e),p.surah===b.surah?_("".concat(a," • ").concat(p.fromAyah,"-").concat(b.toAyah)):_("".concat(a," ").concat(p.fromAyah," - ").concat(t," ").concat(b.toAyah))}else w(""),_("");j(h),d(n),P(m);let k=a+1;if(k<=f.rp){N("tanzil_simple_plain").catch(()=>void 0);let e=(0,f.aI)(k);Array.from(new Set(e.map(e=>e.surah))).forEach(e=>(0,y.LX)(e))}}catch(a){e||P(S(a))}finally{e||E(!1)}}(),()=>{e=!0}},[a,c]),(0,n.useEffect)(()=>{if(0===p.length)return;let e=new URLSearchParams(window.location.search),a=Number(e.get("surah")),t=Number(e.get("ayah"));if(!Number.isFinite(a)||!Number.isFinite(t))return;let r=window.setTimeout(()=>{var e;null==(e=document.getElementById("ayah-".concat(a,"-").concat(t)))||e.scrollIntoView({behavior:"smooth",block:"center"})},100);return()=>{window.clearTimeout(r)}},[p]),(0,n.useEffect)(()=>{let e=e=>{"ArrowRight"===e.key&&Y(a+1,{markCurrentPageAsRead:!0}),"ArrowLeft"===e.key&&Y(a-1)};return window.addEventListener("keydown",e),()=>window.removeEventListener("keydown",e)},[Y,a]);let[Z,O]=(0,n.useState)(1),$=(0,n.useRef)(null),G=(0,n.useRef)(1),W=(0,n.useRef)(null);(0,n.useEffect)(()=>{{let e=localStorage.getItem("kuran_zoom_level");if(e){let a=parseFloat(e);!isNaN(a)&&a>=.3&&a<=3&&O(a)}}},[]),(0,n.useEffect)(()=>{let e=e=>{if(2===e.touches.length&&null!==$.current){e.cancelable&&e.preventDefault();let a=e.touches[0].clientX-e.touches[1].clientX,t=e.touches[0].clientY-e.touches[1].clientY,r=Math.sqrt(a*a+t*t)/$.current,n=G.current*r;O(n=Math.max(.3,Math.min(n,3)))}};return document.addEventListener("touchmove",e,{passive:!1}),()=>document.removeEventListener("touchmove",e)},[]);let K=async()=>{if(o&&!(a<f.rp)){A(!0),P(null);try{let e=X(o.completedSurahs),a=await (0,x.FB)({currentSurah:114,currentAyah:(0,f.Ko)(114),completedSurahs:e,completedAt:new Date().toISOString()});d(a),window.location.href="".concat("/kuran-takip","/completed")}catch(e){P(S(e))}finally{A(!1)}}};return z?(0,r.jsx)(m.Zp,{children:(0,r.jsxs)(m.aR,{children:[(0,r.jsx)(m.ZB,{children:"Mushaf sayfası y\xfckleniyor..."}),(0,r.jsx)(m.BT,{children:"L\xfctfen bekleyin."})]})}):0===p.length?(0,r.jsxs)(m.Zp,{children:[(0,r.jsxs)(m.aR,{children:[(0,r.jsx)(m.ZB,{children:"Sayfa bulunamadı"}),(0,r.jsx)(m.BT,{children:null!=M?M:"Veri alınırken bir sorun oluştu."})]}),(0,r.jsx)(m.Wu,{children:(0,r.jsx)(l.$,{asChild:!0,children:(0,r.jsx)("a",{href:"".concat("/kuran-takip","/"),children:"Kaldığım Yere D\xf6n"})})})]}):(0,r.jsxs)("section",{ref:W,className:"space-y-4 xl:space-y-5 touch-pan-y",onTouchStart:e=>{var a,t,r,n;if(2===e.touches.length){let a=e.touches[0].clientX-e.touches[1].clientX,t=e.touches[0].clientY-e.touches[1].clientY;$.current=Math.sqrt(a*a+t*t),G.current=Z;return}F.current=null!=(r=null==(a=e.touches[0])?void 0:a.clientX)?r:null,L.current=null!=(n=null==(t=e.touches[0])?void 0:t.clientY)?n:null},onTouchEnd:e=>{var t,r,n,s;if(null!==$.current){e.touches.length<2&&($.current=null,localStorage.setItem("kuran_zoom_level",Z.toString()));return}let l=F.current,i=L.current;if(F.current=null,L.current=null,null===l||null===i)return;let c=null!=(n=null==(t=e.changedTouches[0])?void 0:t.clientX)?n:l,o=null!=(s=null==(r=e.changedTouches[0])?void 0:r.clientY)?s:i,d=c-l;!(120>Math.abs(d))&&(Math.abs(o-i)>.5*Math.abs(d)||(d<0?Y(a+1,{markCurrentPageAsRead:!0}):Y(a-1)))},children:[(0,r.jsx)("div",{className:"min-w-0",children:(0,r.jsx)(u,{ayahs:p,pageMeta:{page:a,rangeLabel:D,juzLabel:B},onPreviousPage:()=>{Y(a-1)},onNextPage:()=>{Y(a+1,{markCurrentPageAsRead:!0})},canGoPrevious:a>0,canGoNext:a<f.rp,isNavigating:I,canShowTranslations:i,isMealOpen:C,onToggleMeal:()=>T(e=>!e),zoomLevel:Z})}),(0,r.jsx)(m.Zp,{className:"border-muted/60",children:(0,r.jsxs)(m.Wu,{className:"space-y-3 pt-4 xl:space-y-2 xl:pt-3",children:[(0,r.jsxs)("div",{className:"flex flex-wrap items-center justify-between gap-2 text-xs text-muted-foreground",children:[(0,r.jsxs)("span",{children:["Sayfa %",R]}),(0,r.jsxs)("span",{children:["Hatim %",q]})]}),(0,r.jsxs)("div",{className:"grid gap-2 sm:grid-cols-2",children:[(0,r.jsxs)("div",{className:"space-y-1",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between text-xs text-muted-foreground",children:[(0,r.jsx)("span",{children:"Sayfa ilerlemesi"}),(0,r.jsxs)("span",{children:["%",R]})]}),(0,r.jsx)(h.k,{value:R,className:"h-1.5"})]}),(0,r.jsxs)("div",{className:"space-y-1",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between text-xs text-muted-foreground",children:[(0,r.jsx)("span",{children:"Tamamlanan sureler"}),(0,r.jsxs)("span",{children:["%",q]})]}),(0,r.jsx)(h.k,{value:q,className:"h-1.5"})]})]}),(0,r.jsx)("div",{className:"flex flex-wrap gap-2",children:a>=f.rp&&(0,r.jsx)(l.$,{size:"sm",onClick:K,disabled:I,children:I?"Kaydediliyor...":"Hatmi Tamamla"})}),M&&(0,r.jsx)("p",{className:"text-sm text-destructive",children:M})]})})]})}function z(){let e=new URLSearchParams(window.location.search).get("page");if(!e)return 0;let a=Number(e);return Number.isFinite(a)?(0,f.ZS)(a):0}function E(){let[e,a]=(0,n.useState)(z);(0,n.useEffect)(()=>{function e(){a(z())}return window.addEventListener("popstate",e),()=>window.removeEventListener("popstate",e)},[]);let t=(0,n.useCallback)(e=>{let t=(0,f.ZS)(e);a(t);let r="".concat("/kuran-takip","/reader?page=").concat(t);window.history.pushState(null,"",r)},[]);return(0,r.jsx)(_,{pageNumber:e,goToPage:t})}}},e=>{e.O(0,[909,787,603,46,282,441,696,358],()=>e(e.s=1178)),_N_E=e.O()}]);